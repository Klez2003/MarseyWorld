{% extends "default.html" %}
{% block pagetitle %}@{{user.username}}'s Bank Statement{% endblock %}
{% block pagetype %}bank_statement{% endblock %}
{% block content %}
	<div class="row justify-content-around">
		<div class="col h-100">
			<div class="justify-content-between">
				<h2 class="font-weight-bolder text-center pt-4 pb-3 d-mob-none">@{{user.username}}'s Bank Statement</h2>
				<h5 class="font-weight-bolder text-center pt-2 pb-3 d-md-none">@{{user.username}}'s Bank Statement</h5>
			</div>

			<form id="searchform" class="form-inline search flex-nowrap mt-3 mb-4" action="/@{{user.username}}/bank_statement" method="get">
				<input autocomplete="off" class="form-control w-100" type="search" placeholder="Search bank statement" name="query" {% if query %}value="{{query}}"{% endif %}>
				<span class="input-group-append">
					<span class="input-group-text border-0 bg-transparent" style="margin-left: -2.5rem">
						<button type="submit" class="fas fa-search text-muted"></button>
					</span>
				</span>
			</form>

			<div id="bank-statement" class="rounded border overflow-x-auto">
				{% if logs %}
					<table class="border-0">
						<thead class="bg-transparent">
							<tr>
								<th></th>
								<th></th>
								<th></th>
								<th class="text-black text-lg">Balance</th>
							</tr>
						</thead>
						<tbody>
							{% for log in logs %}
								<tr class="{% if log.amount > 0 %}bg-green{% else %}bg-red{% endif %}">
									<td class="p-0 text-center pl-2" style="width:40px">
										<img width="{% if log.currency == 'coins' %}30{% else %}40{% endif %}" alt="{{log.currency}}" data-bs-toggle="tooltip" data-bs-placement="bottom" src="{{SITE_FULL_IMAGES}}/i/{{log.currency}}.webp?x=18" title="{{log.currency.title()}}">
									</td>
									<td class="unbreakable">
										<b class="bank-statement-amount">{% if log.amount > 0 %}+{% endif %}{{log.amount | commas}}</b>
										<div class="text-gray-500">
											<span class="font-weight-normal" data-bs-toggle="tooltip" data-bs-placement="bottom" data-nonce="{{g.nonce}}" data-onmouseover="timestamp(this, '{{log.created_utc}}')">
												{{log.age_string}}
											</span>
											<a href="/@{{user.username}}/bank_statement/{{log.id}}"><i class="fas fa-link ml-3 text-muted"></i></a>
											<button type="button" class="copy-link ml-3" data-clipboard-text="{{SITE_FULL}}/@{{user.username}}/bank_statement/{{log.id}}"><i class="fas fa-copy text-muted"></i></button>
										</div>
									</td>
									<td class="font-weight-normal">{{log.reason | safe}}</td>
									<td class="unbreakable font-weight-bold">{{log.balance | commas}}</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
					<img id="bank-stamp" src="/i/bank-stamp.webp">
					{{macros.pagination("pb-0 pl-0 pt-1")}}
				{% else %}
					<div class="p-3">There's nothing here right now.</div>
				{% endif %}
			</div>
		</div>
	</div>

	<div class="toast clipboard" id="toast-success" data-bs-animation="true" data-bs-autohide="true" data-bs-delay="5000">
		<div class="toast-body text-center">
			<i class="fas fa-check-circle text-success mr-2"></i>Link copied to clipboard
		</div>
	</div>
	<script defer src="{{'js/vendor/clipboard.js' | asset}}"></script>
{% endblock %}
